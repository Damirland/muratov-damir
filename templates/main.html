<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ 8–ê</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üìÖ</text></svg>">
    <style>
        :root {
            --bg-color: #f0f2f5;
            --card-bg: #ffffff;
            --primary-blue: #007bff;
            --text-main: #2c3e50;
            --text-muted: #7f8c8d;
        }

        body {
            font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
            background-color: var(--bg-color);
            margin: 0;
            padding: 20px;
            color: var(--text-main);
        }

        h1 { text-align: center; margin-bottom: 30px; color: var(--primary-blue); }

        .timetable {
            display: flex;
            flex-wrap: wrap;
            gap: 15px; /* –ß—É—Ç—å —É–º–µ–Ω—å—à–∏–ª–∏ –æ—Ç—Å—Ç—É–ø, —á—Ç–æ–±—ã —Ç–æ—á–Ω–æ –≤–ª–µ–∑–ª–æ */
            justify-content: center;
            max-width: 1600px; /* –†–∞—Å—à–∏—Ä–∏–ª–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –ø–æ—á—Ç–∏ –Ω–∞ –≤–µ—Å—å —ç–∫—Ä–∞–Ω */
            margin: 0 auto;
            width: 100%;
        }

        .day-card {
            background: var(--card-bg);
            border-radius: 15px;
            box-shadow: 0 10px 20px rgba(0,0,0,0.05);
            padding: 15px;
            /* Flex-–º–∞–≥–∏—è: –∫–∞—Ä—Ç–æ—á–∫–∏ –±—É–¥—É—Ç —Å—Ç–∞—Ä–∞—Ç—å—Å—è –∑–∞–Ω–∏–º–∞—Ç—å —Ä–∞–≤–Ω–æ–µ –º–µ—Å—Ç–æ, 
               –Ω–æ –Ω–µ —Å–æ–∂–º—É—Ç—Å—è –º–µ–Ω—å—à–µ 200px */
            flex: 1 1 200px; 
            max-width: none; /* –£–±—Ä–∞–ª–∏ –∂–µ—Å—Ç–∫–æ–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –≤ 300px */
        }

        .day-title {
            font-size: 20px;
            font-weight: bold;
            color: var(--primary-blue);
            border-bottom: 2px solid #eef2f7;
            padding-bottom: 10px;
            margin-bottom: 15px;
            text-align: center;
        }

        /* –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π —Å—Ç–∏–ª—å —É—Ä–æ–∫–∞ */
        .lesson {
            padding: 12px;
            margin-bottom: 10px;
            border-radius: 10px;
            border-left: 5px solid #ccc;
            background: #f8f9fa;
            /* –£–±—Ä–∞–ª–∏ cursor: pointer, —Ç–∞–∫ –∫–∞–∫ –∫–ª–∏–∫–∞—Ç—å –±–æ–ª—å—à–µ –Ω–µ–ª—å–∑—è */
        }

        .lesson-time {
            font-size: 11px;
            text-transform: uppercase;
            color: var(--text-muted);
            margin-bottom: 4px;
            font-weight: 600;
        }

        /* –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –ø—Ä–µ–¥–º–µ—Ç–∞ –∏ –∫–∞–±–∏–Ω–µ—Ç–∞ */
        .lesson-main {
            display: flex;
            justify-content: space-between; /* –ü—Ä–µ–¥–º–µ—Ç —Å–ª–µ–≤–∞, –∫–∞–±–∏–Ω–µ—Ç —Å–ø—Ä–∞–≤–∞ */
            align-items: center;
            gap: 10px;
        }

        .lesson-subject {
            font-size: 16px;
            font-weight: 600;
        }

        .lesson-room {
            font-size: 14px;
            color: var(--text-muted);
            background: #eee;
            padding: 2px 8px;
            border-radius: 5px;
            white-space: nowrap; /* –ß—Ç–æ–±—ã –Ω–æ–º–µ—Ä –∫–∞–±–∏–Ω–µ—Ç–∞ –Ω–µ –ø–µ—Ä–µ–Ω–æ—Å–∏–ª—Å—è */
        }

        .empty-day-msg {
            color: var(--text-muted);
            font-size: 14px;
            text-align: center;
            padding: 20px 0;
            font-style: italic;
            border: 1px dashed #ddd;
            border-radius: 10px;
        }

        /* –ü–æ–¥—Å–≤–µ—Ç–∫–∞ —Ç–µ–∫—É—â–µ–≥–æ –¥–Ω—è */
        .day-card.today {
            border: 2px solid var(--primary-blue);
            box-shadow: 0 0 20px rgba(0, 123, 255, 0.15);
            position: relative;
        }

        .day-card.today::before {
            content: "–°–ï–ì–û–î–ù–Ø";
            position: absolute;
            top: -10px;
            right: 15px;
            background: var(--primary-blue);
            color: white;
            font-size: 10px;
            font-weight: bold;
            padding: 4px 10px;
            border-radius: 20px;
        }

        @media (max-width: 600px) {
            .day-card { max-width: 100%; }
        }

        /* –°—Ç–∏–ª–∏ –¥–ª—è –∞–Ω–∏–º–∞—Ü–∏–∏ –∑–∞–≥—Ä—É–∑–∫–∏ */
        .loader-container {
            width: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 50px 0;
            color: var(--primary-blue);
            font-weight: 600;
        }

        .spinner {
            width: 40px;
            height: 40px;
            border: 4px solid rgba(0, 123, 255, 0.2);
            border-top: 4px solid var(--primary-blue);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-bottom: 15px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        /* –°—Ç–∏–ª—å –¥–ª—è —é–∑–µ—Ä–Ω–µ–π–º–∞ —Å–æ–∑–¥–∞—Ç–µ–ª—è */
        .creator-badge {
            position: absolute;
            top: 20px;
            right: 20px;
            font-size: 14px;
            font-weight: 600;
            color: var(--text-muted);
            text-decoration: none;
            background: var(--card-bg);
            padding: 6px 12px;
            border-radius: 20px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
            transition: all 0.3s ease;
        }

        .creator-badge:hover {
            color: var(--primary-blue);
            box-shadow: 0 4px 12px rgba(0, 123, 255, 0.2);
            transform: translateY(-2px);
        }

        /* –ê–¥–∞–ø—Ç–∞—Ü–∏—è –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö —Ç–µ–ª–µ—Ñ–æ–Ω–æ–≤, —á—Ç–æ–±—ã –Ω–µ –Ω–∞–µ–∑–∂–∞–ª–æ –Ω–∞ –∑–∞–≥–æ–ª–æ–≤–æ–∫ */
        @media (max-width: 600px) {
            .creator-badge {
                position: relative;
                display: block;
                top: 0;
                right: 0;
                width: max-content;
                margin: 0 auto 15px auto;
                text-align: center;
            }
            h1 {
                margin-top: 5px;
            }
        }
        .time-badge {
            color: var(--primary-blue);
            font-weight: bold;
            margin-left: 8px;
            background: rgba(0, 123, 255, 0.1);
            padding: 2px 6px;
            border-radius: 4px;
            font-size: 11px;
        }
    </style>
</head>
<body>
    <a href="https://t.me/wisposhka" target="_blank" class="creator-badge">@wisposhka</a>

    <h1>–û—Å–Ω–æ–≤–Ω–æ–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ 8–ê –∫–ª–∞—Å—Å–∞</h1>
    <div style="text-align: center; margin-bottom: 20px;">
    <a href="/" style="text-decoration: none; padding: 10px; color: #007bff;">–î–Ω–µ–≤–Ω–∏–∫ –Ω–∞ —Å–µ–≥–æ–¥–Ω—è</a>
    | 
    <a href="/main" style="text-decoration: none; padding: 10px; color: #007bff;">–û—Å–Ω–æ–≤–Ω–æ–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ</a>
</div>
    <div class="timetable" id="timetableContainer">
        <div class="loader-container">
            <div class="spinner"></div>
            <div>–ó–∞–≥—Ä—É–∑–∫–∞ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è...</div>
        </div>
    </div>
    

    <script>
        async function fetchTimetable() {
            try {
                // –í index.html —Ç—É—Ç –±—É–¥–µ—Ç /api/timetable, –∞ –≤ main.html - /api/main_timetable
                // –û—Å—Ç–∞–≤—å —Ç–æ—Ç –ø—É—Ç—å, –∫–æ—Ç–æ—Ä—ã–π –±—ã–ª –≤ —Ñ–∞–π–ª–µ –∏–∑–Ω–∞—á–∞–ª—å–Ω–æ!
                const response = await fetch(`/api/main_timetable`); 
                const data = await response.json();
                renderTimetable(data);
            } catch (err) {
                console.error("–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏:", err);
                document.getElementById('timetableContainer').innerHTML = 
                    '<div class="loader-container" style="color: #e74c3c;">‚ùå –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –æ–±–Ω–æ–≤–∏—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É.</div>';
            }
        }

        function renderTimetable(lessons) {
            const container = document.getElementById('timetableContainer');
            container.innerHTML = '';
            // --- –†–ê–°–ü–ò–°–ê–ù–ò–ï –ó–í–û–ù–ö–û–í ---
            // –í–ø–∏—à–∏ —Å—é–¥–∞ —Ç–æ—á–Ω–æ–µ –≤—Ä–µ–º—è –Ω–∞—á–∞–ª–∞ —É—Ä–æ–∫–æ–≤ –∏–∑ —Å–≤–æ–∏—Ö —Ç–∞–±–ª–∏—Ü!
            const timeSchedules = {
                '–í—Ç–æ—Ä–Ω–∏–∫': {
    1: "08:40", 2: "09:30", 3: "10:25", 4: "11:20", 5: "12:10", 6: "13:00", 7: "13:50", 8: "14:45"
},
'default': { // –î–ª—è –ü–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫–∞, –°—Ä–µ–¥—ã, –ß–µ—Ç–≤–µ—Ä–≥–∞, –ü—è—Ç–Ω–∏—Ü—ã –∏ –°—É–±–±–æ—Ç—ã
    1: "08:00", 2: "08:50", 3: "09:45", 4: "10:40", 5: "11:35", 6: "12:25", 7: "13:15", 8: "14:10"
}
            };

            const daysData = {};
            lessons.forEach(lesson => {
                if (!daysData[lesson.day]) daysData[lesson.day] = [];
                daysData[lesson.day].push(lesson);
            });

            const fullWeek = ['–ü–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫', '–í—Ç–æ—Ä–Ω–∏–∫', '–°—Ä–µ–¥–∞', '–ß–µ—Ç–≤–µ—Ä–≥', '–ü—è—Ç–Ω–∏—Ü–∞'];
            const todayName = new Intl.DateTimeFormat('ru-RU', { weekday: 'long' }).format(new Date());
            const capitalizedToday = todayName.charAt(0).toUpperCase() + todayName.slice(1);

            fullWeek.forEach(day => {
                const dayCard = document.createElement('div');
                dayCard.className = 'day-card';
                if (day === capitalizedToday) dayCard.classList.add('today');

                dayCard.innerHTML = `<div class="day-title">${day}</div>`;
                
                const dayLessons = daysData[day];

                if (dayLessons && dayLessons.length > 0) {
                    dayLessons.sort((a, b) => a.lesson_num - b.lesson_num);
                    dayLessons.forEach(lesson => {
                        const lessonDiv = document.createElement('div');
                        lessonDiv.className = 'lesson';
                        
                        const colors = {
                            '–ê–ª–≥–µ–±—Ä–∞': '#4a90e2', '–ì–µ–æ–º–µ—Ç—Ä–∏—è': '#4a90e2',
                            '–†—É—Å—Å–∫–∏–π —è–∑—ã–∫': '#e67e22', '–õ–∏—Ç–µ—Ä–∞—Ç—É—Ä–∞': '#e67e22',
                            '–§–∏–∑–∫—É–ª—å—Ç—É—Ä–∞': '#27ae60', '–ò–Ω—Ñ–æ—Ä–º–∞—Ç–∏–∫–∞': '#9b59b6',
                            '–ò—Å—Ç–æ—Ä–∏—è': '#e74c3c', '–ì–µ–æ–≥—Ä–∞—Ñ–∏—è': '#f1c40f',
                            "–•–∏–º–∏—è": "#25a876", "–ê–Ω–≥–ª–∏–π—Å–∫–∏–π —è–∑—ã–∫ / –ò–Ω—Ñ–æ—Ä–º–∞—Ç–∏–∫–∞": "#911129",
                            "–ú—É–∑—ã–∫–∞": "#d5d911", "–û–±—â–µ—Å—Ç–≤–æ–∑–Ω–∞–Ω–∏–µ": "#00691a",
                            "–ë–∏–æ–ª–æ–≥–∏—è": "#27ba4c", "–ö–ª–∞—Å—Å–Ω—ã–π —á–∞—Å": "#368fcf",
                            "–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–∫–∞": "#4a90e2", "–§–∏–∑–∏–∫–∞": "#a6e3dc",
                            "–¢—Ä—É–¥": "#bf7b5c", "–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –º–∞—Ç–µ–º–∞—Ç–∏–∫–∞": "#4a90e2",
                            "–û–ë–ó–†": "#214a12", "–ê–Ω–≥–ª–∏–π—Å–∫–∏–π —è–∑—ã–∫": "#9c1414",
                            "–ü—Ä–∞–∫—Ç–∏–∫—É–º –ø–æ —Ä—É—Å—Å–∫–æ–º—É —è–∑—ã–∫—É": "#e67e22", "–†–µ—à–µ–Ω–∏–µ –∑–∞–¥–∞—á –ø–æ –º–∞—Ç–µ–º–∞—Ç–∏–∫–µ": "#4a90e2",
                            "–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è –≥—Ä–∞–º–æ—Ç–Ω–æ—Å—Ç—å": "#e67e22", "–í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞": "#4a90e2",
                            "–°–µ–º—å–µ–≤–µ–¥–µ–Ω–∏–µ": "#c22559"
                        };
                        const subjectColor = colors[lesson.subject] || '#ccc';
                        lessonDiv.style.borderLeftColor = subjectColor;

                        // –û–ø—Ä–µ–¥–µ–ª—è–µ–º, –∫–∞–∫–æ–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ –∑–≤–æ–Ω–∫–æ–≤ –±—Ä–∞—Ç—å (–í—Ç–æ—Ä–Ω–∏–∫ –∏–ª–∏ –æ–±—ã—á–Ω–æ–µ)
                        const currentTimes = timeSchedules[day] || timeSchedules['default'];
                        const startTime = currentTimes[lesson.lesson_num] || "";
                        const timeHtml = startTime ? `<span class="time-badge">${startTime}</span>` : "";

                        // –ù–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞: –≤—Ä–µ–º—è –∑–≤–æ–Ω–∫–∞ —Ä—è–¥–æ–º —Å –Ω–æ–º–µ—Ä–æ–º —É—Ä–æ–∫–∞
                        lessonDiv.innerHTML = `
                            <div class="lesson-time">–£—Ä–æ–∫ ${lesson.lesson_num} ${timeHtml}</div>
                            <div class="lesson-main">
                                <span class="lesson-subject">${lesson.subject}</span>
                                <span class="lesson-room">${lesson.room}</span>
                            </div>
                        `;
                        dayCard.appendChild(lessonDiv);
                    });
                } else {
                    const emptyMsg = document.createElement('div');
                    emptyMsg.className = 'empty-day-msg';
                    emptyMsg.innerText = '–ù–µ—Ç —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è';
                    dayCard.appendChild(emptyMsg);
                }

                container.appendChild(dayCard);
            });
        }

        window.onload = fetchTimetable;
    </script>
</body>

</html>





